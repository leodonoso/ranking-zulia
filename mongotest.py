from notable_players import notable_players

tournament = {'name': 'Panter_Arena_#2', 'date': 'Jul 24th, 2022', 'location': 'Av. Bella Vista, Maracaibo 4002, Zulia, Venezuela', 'entrants': 42, 'notable_players': {'total': 20, 'top 5': ['Pancakes', 'Angelini', 'Tobio', 'Jerich', 'AndresAA', 'Tashi', 'X-Pelox', 'Hiro'], 'top 10': ['Cismu', 'Zeliox SwordCloud', 'LuichoX', 'Spade'], 'top 15': ['Anriot', 'Jean Papitas', 'Cax', 'Toxucroc'], 'top 20': ["Ale Hershey's", 'Hidan', 'DIO', 'Diowo']}, 'score': 134, 'standings': [{'placing': '1', 'gamertag': 'Pancakes', 'score': 134, 'losses': ['', 'AndresAA']}, {'placing': '2', 'gamertag': 'X-Pelox', 'score': 122, 'losses': ['Pancakes', 'Pancakes']}, {'placing': '3', 'gamertag': 'Jerich', 'score': 110, 'losses': ['X-Pelox', 'Pancakes']}, {'placing': '4', 'gamertag': 'AndresAA', 'score': 98, 'losses': ['Jerich', 'Pancakes']}, {'placing': '5', 'gamertag': 'Tobio', 'score': 86, 'losses': ['X-Pelox', 'AndresAA']}, {'placing': '5', 'gamertag': 'Angelini', 'score': 86, 'losses': ['X-Pelox', 'Pancakes']}, {'placing': '7', 'gamertag': 'Zeliox SwordCloud', 'score': 74, 'losses': ['Jerich', 'Pancakes']}, {'placing': '7', 'gamertag': 'Spade', 'score': 74, 'losses': ['Angelini', 'Tobio']}, {'placing': '9', 'gamertag': 'Hidan', 'score': 62, 'losses': ['Jerich', 'Pancakes']}, {'placing': '9', 'gamertag': 'Cismu', 'score': 62, 'losses': ['Spade', 'Zeliox SwordCloud']}, {'placing': '9', 'gamertag': 'LuichoX', 'score': 62, 'losses': ['AndresAA', 'Tobio']}, {'placing': '9', 'gamertag': 'Hiro', 'score': 62, 'losses': ['Zeliox SwordCloud', 'Spade']}, {'placing': '13', 'gamertag': 'Toxucroc', 'score': 50, 'losses': ['Pancakes', 'LuichoX']}, {'placing': '13', 'gamertag': "Ale Hershey's", 'score': 50, 'losses': ['X-Pelox', 'Hidan']}, {'placing': '13', 'gamertag': 'Jean Papitas', 'score': 50, 'losses': ['Jerich', 'Hiro']}, {'placing': '13', 'gamertag': 'DIO', 'score': 50, 'losses': ['Toxucroc', 'Cismu']}, {'placing': '17', 'gamertag': 'Flye', 'score': 38, 'losses': ['Zeliox SwordCloud', "Ale Hershey's"]}, {'placing': '17', 'gamertag': 'Anriot', 'score': 38, 'losses': ['Tobio', 'Hidan']}, {'placing': '17', 'gamertag': 'Farre', 'score': 38, 'losses': ['Tobio', 'Jean Papitas']}, {'placing': '17', 'gamertag': 'Blate', 'score': 38, 'losses': ['Cismu', 'LuichoX']}, {'placing': '17', 'gamertag': 'Lum1', 'score': 38, 'losses': ["Ale Hershey's", 'Hiro']}, {'placing': '17', 'gamertag': 'Konami', 'score': 38, 'losses': ['Angelini', 'DIO']}, {'placing': '17', 'gamertag': 'Diowo', 'score': 38, 'losses': ['Angelini', 'Toxucroc']}, {'placing': '17', 'gamertag': 'Rookie355', 'score': 38, 'losses': ['AndresAA', 'Cismu']}, {'placing': '25', 'gamertag': 'Cax', 'score': 26, 'losses': ['Konami', 'Diowo']}, {'placing': '25', 'gamertag': 'Tino22', 'score': 26, 'losses': 
['Spade', 'Blate']}, {'placing': '25', 'gamertag': 'Danilopaz1', 'score': 26, 'losses': ['Hiro', 'Flye']}, {'placing': '25', 'gamertag': 'Valgarite', 'score': 26, 'losses': ['Jean Papitas', 'Hidan']}, {'placing': '25', 'gamertag': 'Difox', 'score': 26, 'losses': ['LuichoX', 
'Rookie355']}, {'placing': '25', 'gamertag': 'LIMIT', 'score': 26, 'losses': ['Pancakes', 'DIO']}, {'placing': '25', 'gamertag': 'Agui', 'score': 26, 'losses': ['Anriot', 'Farre']}, {'placing': '25', 'gamertag': 'apselito', 'score': 26, 'losses': ['X-Pelox', 'Lum1']}, {'placing': '33', 'gamertag': 'Tashi', 'score': 14, 'losses': ['Blate', 'Flye']}, {'placing': '33', 'gamertag': 'Bassprototype14', 'score': 14, 
'losses': ['apselito', 'Difox']}, {'placing': '33', 'gamertag': 'luisipop', 'score': 14, 'losses': ['LIMIT', 'Agui']}, {'placing': '33', 
'gamertag': 'Odinlv', 'score': 14, 'losses': ['Diowo', 'Valgarite']}, {'placing': '33', 'gamertag': 'Sly!', 'score': 14, 'losses': ['Danilopaz1', 'Tino22']}, {'placing': '33', 'gamertag': 'Shark', 'score': 14, 'losses': ['Hidan', 'Cax']}, {'placing': '33', 'gamertag': 'Luigio', 'score': 14, 'losses': ['Farre', 'DIO']}, {'placing': '33', 'gamertag': 'GyroZPP', 'score': 14, 'losses': ['Rookie355', 'Lum1']}, {'placing': '33', 'gamertag': 'Cachapa', 'score': 14, 'losses': ['Difox', 'apselito']}, {'placing': '33', 'gamertag': 'Jackson', 'score': 14, 'losses': ['Tino22', 'Danilopaz1']}]}

standings = tournament.get('standings')
attendees = ['Pancakes','X-Pelox','Jerich','Angelini','Tobio']
# Calculate tournament wins, notable wins and wins_score
for z in attendees:
    indexes = []
    tournament_wins = []

    for i in standings:
        # Find the values for the 'losses' key in every dictionary item in the standings list
        x = i.get('losses')

        #  If any of those values matches the current player tag (z), then log the index of it's item so I can
        # search it in the standings list later
        
        # If it matches twice, log the index twice
        if x[0] == z and x[1] == z:
            a = standings.index(i)
            indexes.append(a)
            indexes.append(a)

        elif x[0] == z or x[1] == z:
            a = standings.index(i)
            indexes.append(a)

    # Populate 'tournament_wins' list using the indexes we logged
    for i in indexes:
        tournament_wins.append(standings[i]['gamertag'])
    
    # Calculate notable wins
    notable_wins = []
    for i in tournament_wins:
        for x in notable_players:
            if i == x['tag']:
                if x['rank'] == 'Top 5':
                    notable_wins.append({'gamertag': i, 'rank': x['rank'], 'score': 10})
                if x['rank'] == 'Top 10':
                    notable_wins.append({'gamertag': i, 'rank': x['rank'], 'score': 6})
                if x['rank'] == 'Top 15':
                    notable_wins.append({'gamertag': i, 'rank': x['rank'], 'score': 3})
                if x['rank'] == 'Top 20':
                    notable_wins.append({'gamertag': i, 'rank': x['rank'], 'score': 2})

    # Calculate total score
    wins_score = 0
    for i in notable_wins:
        wins_score += i['score']

    # Find index of player in standings list and update it's data
    for i in standings:
        if z == i['gamertag']:
            i.update({'wins': tournament_wins})
            i.update({'notable_wins': notable_wins})
            i.update({'wins_score': wins_score})
    
    tournament_wins.clear
    notable_wins.clear
    wins_score = 0

print(standings)